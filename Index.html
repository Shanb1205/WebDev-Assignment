<!DOCTYPE html>
<html lang="en"> <!-- ensures page displays in the English Language -->

<head>
    <!-- allows the site to scale to screen size -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Patient Registration System</title>
    <link rel="stylesheet" href="WebDevA2.css">
    <!-- Linking the CSS file to the HTML to improve user friendly appearence -->
</head>

<!-- main body of html code below -->
<body>
    <div class="container">
    <!-- Patient form, fields for user to enter information -->
        <h2>Patient Registration Form</h2>

        <form id="patientForm">
        <!-- id="patientForm" is ?????? -->

            <!-- label for first name entry with its conditions -->
            <label for="firstname">First Name:</label>
            <input type="text" id="firstname" required
            minlength="2" maxlength="12"
            pattern="[A-Za-z]+" placeholder="Enter your first name"
            title="Name must contain only letters (A-Z, a-z) and be between 2 and 12 characters long.">
            <!-- inline validation, error display -->
            <span class="error-message" id="firstnameError"></span>

            <!-- label for last name entry with its conditions -->
            <label for="lastname">Surname:</label>
            <input type="text" id="lastname" required
            minlength="2" maxlength="20"
            pattern="[A-Za-z\-\']+" placeholder="Enter your surname"
            title="Name must contain only letters (A-Z, a-z) and be between 2 and 20 characters long.">
            <!-- inline validation, error display-->
            <span class="error-message" id="lastnameError"></span>

            <!-- label for age entry with its conditions -->
            <label for="age">Age:</label>
            <input type="number" id="age" required
            min="0" max="120" placeholder="Enter your age in years"
            step="1"
            title="Age must be between 0-120 years">
            <!-- inline validation, error display-->
            <span class="error-message" id="ageError"></span>

            <!-- label for date of birth with its conditions -->
            <label for="DOB">DOB:</label>
            <input type="date" id="DOB" required>
            <!-- inline validation, error display -->
            <span class="error-message" id="DOBError"></span>

            <!-- label for gender entry with its conditions --> 
            <label for="gender">Gender:</label>
            <select id="gender" required>
                <!-- user can only select from the following options -->
                <option value="">Select Gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
            </select>
            <!-- inline validation, error display -->
            <span class="error-message" id="genderError"></span>

            <!-- label for height entry with its conditions -->
            <label for="height">Height (cm):</label>
            <input type="number" id="height" required
             min="30" max="200" placeholder="Enter your height in cm"
             step="1"
             title="Height must be between 30-200cm">
             <!-- inline validation, error display -->
            <span class="error-message" id="heightError"></span>

            <!-- label for wieght entry with its conditions-->
            <label for="weight">Weight (kg):</label>
            <input type="number" id="weight" required
             min="1" max="200" placeholder="Enter your weight in kg"
             step="1"
             title="Height must be between 1-200kg">
            <!-- inline validation, error display--> 
            <span class="error-message" id="weightError"></span>

            <!-- label for contact mobile number with its coditions -->
            <label for="contact">Contact Mobile No:</label>
            <input type="text" id="contact" required
            inputmode="numeric"
            pattern="07[0-9]{9}" placeholder="Enter your mobile number"
            maxlength="11"
            title="Please enter a valid 11-digit phone number starting with 07.">
            <!-- inline validation, error display-->
            <span class="error-message" id="contactError"></span>

            <!-- label for email entry with its conditions. Although can only get feild to recognise @ not .com or .co.uk, meaning a@a is accepted as a valid email address. -->
            <label for="email">Email Address:</label>
            <input type="email" id="email" required
            inputmode="email"
            pattern="[^ @]*@[^ @]*" placeholder="Enter your email"
            maxlength="25"
            title="Please enter a valid email address, including @, ending in .com or .co.uk">
            <!-- inline validation, error display-->
            <span class="error-message" id="emailError"></span>

           <!-- Success message container -->
        <div id="successMessage" style="color: green; margin-bottom: 10px; display: none; font-weight: bold;">
            Patient successfully registered!
        </div>
           
            <!-- 'Register Patient' submit button -->
            <button type="submit">Register Patient</button>
        </form>

<!-- Statistics container, seperated into 'Stat Cards' for easy viewing -->
<h2>Statistics Summary</h2>
    <div id="statisticsContainer">
        <!-- Stat Card 1 -->
        <div class="stat-card">
            <h3>Total Patients</h3>
            <p id="statTotalPatients" class="stat-value">0</p>
        </div>

        <!-- Stat Card 2 -->
        <div class="stat-card">
            <h3>Females Aged ≥50</h3>
            <p id="statFemaleOver50" class="stat-value">0</p>
        </div>

        <!-- Stat Card 3 -->
        <div class="stat-card large-card">
            <h3>Average BMI by Sex</h3>
            <ul>
                <li>Male: <span id="statBMIMaleAvg" class="stat-value">0.0</span></li>
                <li>Female: <span id="statBMIFemaleAvg" class="stat-value">0.0</span></li>
                <li>Other: <span id="statBMIOtherAvg" class="stat-value">0.0</span></li>
            </ul>
        </div>

        <!-- Stat Card 4 -->
        <div class="stat-card large-card">
            <h3>Patient Counts by BMI Category</h3>
            <ul>
                <li>Underweight: <span id="statBMIUnderweight" class="stat-value">0</span></li>
                <li>Normal weight: <span id="statBMINormal" class="stat-value">0</span></li>
                <li>Overweight: <span id="statBMIOverweight" class="stat-value">0</span></li>
                <li>Obese: <span id="statBMIObese" class="stat-value">0</span></li>
            </ul>
        </div>
    </div>

    <!-- Search bar function -->
        <h3>Search Patients</h3>
        <input type="text" id="patientSearchInput" placeholder="Search by ID, First Name, or Last Name..." title="Search for patients by ID, first name, or last name.">

        <!-- List display of registered patients -->
        <h2>Registered Patients</h2>
        <table id="patientTable">
            <thead>
                <tr>
                    <!-- list of successful patients able to be 'sorted' within the table-->
                    <th class="sortable" data-sort="id">Patient ID</th>
                    <th class="sortable" data-sort="firstname">First Name</th>
                    <th class="sortable" data-sort="lastname">Surame</th>
                    <th class="sortable" data-sort="age">Age</th>
                    <th class="sortable" data-sort="DOB">D.O.B</th>
                    <th class="sortable" data-sort="gender">Gender</th>
                    <th class="sortable" data-sort="height">Height</th>
                    <th class="sortable" data-sort="weight">Weight</th>
                    <th class="sortable" data-sort="contact">Contact Number</th>
                    <th class="sortable" data-sort="email">Email Address</th>
                    <th class="sortable" data-sort="bmi">BMI</th>
                    <th class="action-cell">Modify</th>
                    <th class="action-cell">Delete</th>
                </tr>
                <tr id="filterRow">
                    <!-- list of successful patients able to be 'filtered' within the table-->
                    <td><input type="text" id="filter-id" class="column-filter" placeholder="Filter ID"></td>
                    <td><input type="text" id="filter-firstname" class="column-filter" placeholder="Filter Name"></td>
                    <td><input type="text" id="filter-lastname" class="column-filter" placeholder="Filter Surname"></td>
                    <td><input type="text" id="filter-age" class="column-filter" placeholder="Filter Age"></td>
                    <td><input type="text" id="filter-DOB" class="column-filter" placeholder="Filter D.O.B"></td>
                    <td><input type="text" id="filter-gender" class="column-filter" placeholder="Filter Gender"></td>
                    <td><input type="text" id="filter-height" class="column-filter" placeholder="Filter Height"></td>
                    <td><input type="text" id="filter-weight" class="column-filter" placeholder="Filter Weight"></td>
                    <td><input type="text" id="filter-contact" class="column-filter" placeholder="Filter Contact"></td>
                    <td><input type="text" id="filter-email" class="column-filter" placeholder="Filter Email"></td>
                    <td><input type="text" id="filter-bmi" class="column-filter" placeholder="Filter BMI"></td>
                    <!-- Empty cells for Modify and Delete columns -->
                    <td class="action-cell"></td>
                    <td class="action-cell"></td>
                </tr>
            </thead>
            <tbody id="patientList">
            </tbody>
        </table>
        
        <!-- BMI Table -->
        <br>
        <h2>BMI Categories</h2>
        <table id="bmiLegendTable">
            <thead>
                <tr>
                    <th>Category</th>
                    <th>BMI Range (kg/m²)</th>
                </tr>
            </thead>
            <tbody>
                <tr id="underweightRow"><td>Underweight</td><td>&lt; 18.5</td></tr>
                <tr id="normalRow"><td>Normal weight</td><td>18.5 - 24.9</td></tr>
                <tr id="overweightRow"><td>Overweight</td><td>25.0 - 29.9</td></tr>
                <tr id="obeseRow"><td>Obese</td><td>&ge; 30.0</td></tr>
            </tbody>
        </table>
    </div>

<!-- Link to the JavaScript -->
<script src="WebDevA3.js"></script>
</body>
</html>
